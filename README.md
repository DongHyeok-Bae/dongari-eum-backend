# ë™ì•„ë¦¬ìŒ (Dongari-eum) ë°±ì—”ë“œ ì„œë²„

'ë™ì•„ë¦¬ìŒ' ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°±ì—”ë“œ ì„œë²„ì…ë‹ˆë‹¤. ë™ì•„ë¦¬ ì •ë³´ ê´€ë¦¬, íšŒì› ê´€ë¦¬, íšŒê³„ ë° í™œë™ ê¸°ë¡ ê´€ë¦¬ ë“± í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.

## ğŸš€ ê¸°ìˆ  ìŠ¤íƒ

- **Framework**: FastAPI
- **Database**: SQLite
- **ORM**: SQLAlchemy
- **Schema Validation**: Pydantic
- **Web Server**: Uvicorn

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
dongari-eum-backend/
â”œâ”€â”€ app/                  # í•µì‹¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§
â”‚   â”œâ”€â”€ routers/          # API ì—”ë“œí¬ì¸íŠ¸ ì •ì˜ (ë¼ìš°íŒ…)
â”‚   â”œâ”€â”€ services/         # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬
â”‚   â”œâ”€â”€ models.py         # ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ëª¨ë¸ (SQLAlchemy)
â”‚   â”œâ”€â”€ schemas.py        # ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ ëª¨ë¸ (Pydantic)
â”‚   â”œâ”€â”€ database.py       # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë° ì„¸ì…˜ ê´€ë¦¬
â”‚   â”œâ”€â”€ auth.py           # ì¸ì¦ ê´€ë ¨ ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ main.py           # FastAPI ì•± ì§„ì…ì  ë° ë¯¸ë“¤ì›¨ì–´ ì„¤ì •
â”œâ”€â”€ static/               # ì •ì  íŒŒì¼ (ì´ë¯¸ì§€, ì²¨ë¶€íŒŒì¼ ë“±)
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ files/
â”œâ”€â”€ dongari.db            # SQLite ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼
â”œâ”€â”€ requirements.txt      # í”„ë¡œì íŠ¸ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ëª©ë¡
â””â”€â”€ README.md             # í”„ë¡œì íŠ¸ ì„¤ëª…ì„œ
```

## âš™ï¸ ì„¤ì¹˜ ë° ì‹¤í–‰ ë°©ë²•

1.  **ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”**
    ```bash
    python -m venv venv
    source venv/bin/activate  # macOS/Linux
    # venv\Scripts\activate  # Windows
    ```

2.  **ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ì„¤ì¹˜**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Uvicorn ì„œë²„ ì‹¤í–‰**
    `dongari-eum-backend` ë””ë ‰í„°ë¦¬ ë‚´ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. `--reload` ì˜µì…˜ì€ ì½”ë“œ ë³€ê²½ ì‹œ ì„œë²„ë¥¼ ìë™ìœ¼ë¡œ ì¬ì‹œì‘í•´ì¤ë‹ˆë‹¤.
    ```bash
    uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
    ```

4.  **API ë¬¸ì„œ í™•ì¸**
    ì„œë²„ê°€ ì‹¤í–‰ë˜ë©´, ë‹¤ìŒ ì£¼ì†Œì—ì„œ ìë™ ìƒì„±ëœ API ë¬¸ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - **Swagger UI**: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
    - **ReDoc**: [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)

## ğŸ”— API ëª…ì„¸

> ëª¨ë“  APIëŠ” `/docs` ì—ì„œ í™•ì¸í•˜ê³  ì§ì ‘ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° API í˜¸ì¶œì€ ì¸ì¦ì´ í•„ìš”í•œ ê²½ìš° `Authorization: Bearer <TOKEN>` í—¤ë”ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.

---

### **Authentication**
-   **Prefix**: `/auth`

| Method | Path              | ì„¤ëª…                          | ìš”ì²­ (Body / Form)             | ì„±ê³µ ì‘ë‹µ (2xx)                         |
| :----- | :---------------- | :---------------------------- | :--------------------------- | :-------------------------------------- |
| `POST` | `/signup`         | ìƒˆë¡œìš´ ì‚¬ìš©ìë¥¼ ìƒì„±(íšŒì›ê°€ì…)í•©ë‹ˆë‹¤. | **Body**: `email`, `password`, `first_name` ë“± | `201` `User` ê°ì²´                     |
| `POST` | `/token`          | ë¡œê·¸ì¸ í›„ ì•¡ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰í•©ë‹ˆë‹¤.  | **Form**: `username` (email), `password` | `200` `{"access_token": "...", "token_type": "bearer"}` |
| `GET`  | `/users/me`       | í˜„ì¬ ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. | (ì—†ìŒ)                       | `200` `User` ê°ì²´                     |

---

### **Clubs**
-   **Prefix**: `/clubs`

| Method | Path              | ì„¤ëª…                          | íŒŒë¼ë¯¸í„° / ìš”ì²­ (Body / Form)           | ì„±ê³µ ì‘ë‹µ (2xx)                         |
| :----- | :---------------- | :---------------------------- | :----------------------------- | :-------------------------------------- |
| `POST` | `/`               | ì‹ ê·œ ë™ì•„ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.         | **Form**: `name`, `club_type`, `topic`, `password`, `description` (ì„ íƒ), `file` (ì„ íƒ) | `200` `Club` ê°ì²´                     |
| `GET`  | `/`               | ë™ì•„ë¦¬ ëª©ë¡ì„ ì¡°íšŒ/ê²€ìƒ‰í•©ë‹ˆë‹¤.     | **Query**: `name: str` (ì„ íƒ)    | `200` `List[Club]` ê°ì²´               |
| `POST` | `/join`           | ë™ì•„ë¦¬ì— ê°€ì…í•©ë‹ˆë‹¤.              | **Body**: `name`, `password` | `200` `{"message": "...", "club_id": ...}` |
| `GET`  | `/{club_id}`      | íŠ¹ì • ë™ì•„ë¦¬ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.      | **Path**: `club_id: int`         | `200` `Club` ê°ì²´                     |

---

### **Club Members**
-   **Prefix**: `/clubs/{club_id}/members`

| Method   | Path            | ì„¤ëª…                       | íŒŒë¼ë¯¸í„° / ìš”ì²­ (Body)            | ì„±ê³µ ì‘ë‹µ (2xx)           |
| :------- | :-------------- | :------------------------- | :------------------------------ | :------------------------ |
| `POST`   | `/`             | ë™ì•„ë¦¬ì— ì‹ ê·œ ë¶€ì›ì„ ì¶”ê°€í•©ë‹ˆë‹¤. | **Path**: `club_id: int`<br/>**Body**: `name`, `birth_date`, `student_id` ë“± | `200` `ClubMember` ê°ì²´ |
| `GET`    | `/`             | íŠ¹ì • ë™ì•„ë¦¬ì˜ ë¶€ì› ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤. | **Path**: `club_id: int`          | `200` `List[ClubMember]` |
| `PATCH`  | `/{member_id}`  | ë¶€ì› ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.        | **Path**: `club_id: int`, `member_id: int`<br/>**Body**: (ìˆ˜ì •í•  í•„ë“œë“¤) | `200` `ClubMember` ê°ì²´ |
| `DELETE` | `/{member_id}`  | ë¶€ì›ì„ ì‚­ì œí•©ë‹ˆë‹¤.             | **Path**: `club_id: int`, `member_id: int` | `204` No Content        |

---

### **Accounting**
- **Prefix**: `/clubs/{club_id}/accounting`

| Method | Path | ì„¤ëª… | íŒŒë¼ë¯¸í„° / ìš”ì²­ (Form) | ì„±ê³µ ì‘ë‹µ (2xx) |
| :--- | :--- | :--- | :--- | :--- |
| `POST` | `/` | ì‹ ê·œ íšŒê³„ ë‚´ì—­ì„ ì¶”ê°€í•©ë‹ˆë‹¤. | **Path**: `club_id: int`<br/>**Form**: `date`, `description`, `amount`, `manager` (ì„ íƒ), `photo` (ì„ íƒ) | `200` `AccountingEntry` ê°ì²´ |
| `GET` | `/` | íšŒê³„ ë‚´ì—­ì„ ì¡°íšŒí•˜ê±°ë‚˜<br/>ì—‘ì…€ íŒŒì¼ë¡œ ë‚´ë³´ëƒ…ë‹ˆë‹¤. | **Path**: `club_id: int`<br/>**Query**: `export: bool` (ì„ íƒ) | `200` `List[AccountingEntry]`<br/>ë˜ëŠ” Excel íŒŒì¼ |

---

### **Operation Logs**
- **Prefix**: `/clubs/{club_id}/operation-logs`

| Method | Path | ì„¤ëª… | íŒŒë¼ë¯¸í„° / ìš”ì²­ (Form) | ì„±ê³µ ì‘ë‹µ (2xx) |
| :--- | :--- | :--- | :--- | :--- |
| `POST` | `/` | ì‹ ê·œ í™œë™ ê¸°ë¡ì„ ì¶”ê°€í•©ë‹ˆë‹¤. | **Path**: `club_id: int`<br/>**Form**: `log_data` (JSON ë¬¸ìì—´), `files` (ì„ íƒ) | `200` `OperationLog` ê°ì²´ |
| `GET` | `/` | í™œë™ ê¸°ë¡ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤. | **Path**: `club_id: int` | `200` `List[OperationLog]` |
| `GET` | `/{log_id}` | íŠ¹ì • í™œë™ ê¸°ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤. | **Path**: `club_id: int`, `log_id: int` | `200` `OperationLog` ê°ì²´ |
